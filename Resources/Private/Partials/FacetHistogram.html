{namespace s=Tx_SolrFrontend_ViewHelpers}

<div class="histogram">
	<script type="text/javascript">
		var barWidth = {f:if(condition:facetInfo.barWidth, then:facetInfo.barWidth else:1)};
		var myFacetField = '{facetInfo.field}';
		var facetLinkTemplate = '<f:uri.action addQueryString="TRUE" arguments="{s:facetLinkArguments(facetName:facetName, itemName:\"%%%%\", mode:\"add\", activeFacets:activeFacets)}" argumentsToBeExcludedFromQueryString="{s:facetLinkArguments(facetName:facetName, mode:\"remove\", activeFacets:activeFacets)}"/>'
		var activeFacets = [];
		<f:for each="{activeFacets}" as="activeFacet">activeFacets.push('{activeFacet}'.split(':'));</f:for>

		var data = [];
		var facetItem;
		<f:for each="{facetData.values}" as="facetItemCount" key="facetItemName">
			facetItem = {};
			facetItem['name'] = {facetItemName};
			facetItem['freq'] = {facetItemCount};
			data.push(facetItem);
		</f:for>

		createHistogram(data);
	</script>
</div>

<f:if condition="{s:facetLinkArguments(facetName:facetName, activeFacets:activeFacets, mode:'remove')}">
	<f:link.action
		addQueryString="TRUE"
		argumentsToBeExcludedFromQueryString="{s:facetLinkArguments(facetName:facetName, activeFacets:activeFacets, mode:'remove')}"
		class="facetRemove">
		<f:translate key="remove filter"/>
	</f:link.action>
</f:if>
